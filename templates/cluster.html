<!DOCTYPE html>
<html>
<head>
    <title>Stock Clustering - SmartPredict</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .step-container {
            display: none;
        }

        .step-container.active {
            display: block;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 0 20px;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #bdc3c7;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }

        .step.active .step-circle {
            background: #3498db;
        }

        .step.completed .step-circle {
            background: #27ae60;
        }

        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .market-card {
            background: white;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .market-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .market-card.selected {
            border-color: #3498db;
            background: #ecf0f1;
        }

        .market-card h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .market-card p {
            margin: 0;
            color: #7f8c8d;
            font-size: 14px;
        }

        .industry-section {
            margin-bottom: 30px;
            border: 1px solid #ecf0f1;
            border-radius: 8px;
            padding: 20px;
        }

        .industry-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .industry-toggle {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .industry-toggle.checked {
            background: #3498db;
            border-color: #3498db;
        }

        .industry-toggle.checked::after {
            content: '‚úì';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .industry-name {
            font-weight: bold;
            color: #2c3e50;
            flex-grow: 1;
        }

        .industry-count {
            color: #7f8c8d;
            font-size: 14px;
        }

        .stock-list {
            display: none;
            margin-left: 30px;
        }

        .stock-list.expanded {
            display: block;
        }

        .stock-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
        }

        .stock-checkbox {
            width: 16px;
            height: 16px;
            margin-right: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 3px;
            background: white;
            cursor: pointer;
        }

        .stock-checkbox.checked {
            background: #27ae60;
            border-color: #27ae60;
        }

        .stock-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-size: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .stock-name {
            flex-grow: 1;
            font-size: 14px;
        }

        .selection-summary {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .summary-text {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .performance-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .performance-notice strong {
            color: #856404;
        }

        .performance-notice p {
            margin: 5px 0;
            color: #856404;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #f5c6cb;
            margin-bottom: 20px;
        }

        .back-link {
            text-align: center;
            margin-top: 20px;
        }

        .back-link a {
            color: #3498db;
            text-decoration: none;
            font-size: 14px;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        .footer {
            position: fixed;
            bottom: 10px;
            right: 20px;
            font-size: 12px;
            color: #7f8c8d;
            background: rgba(255,255,255,0.9);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #ecf0f1;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            .market-grid {
                grid-template-columns: 1fr;
            }
            .step {
                margin: 0 10px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üìä Stock Clustering</h1>
        <p class="subtitle">Select stocks from your preferred market and analyze their volatility patterns</p>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <span>Select Market</span>
            </div>
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <span>Choose Stocks</span>
            </div>
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <span>Elbow Plot</span>
            </div>
            <div class="step" id="step4">
                <div class="step-circle">4</div>
                <span>Configure & Analyze</span>
            </div>
        </div>

        <!-- Step 1: Market Selection -->
        <div class="step-container active" id="step1-container">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Choose Your Market</h2>
            <div class="market-grid">
                <div class="market-card" data-market="nasdaq100">
                    <h3>üìà NASDAQ-100</h3>
                    <p>100 largest non-financial companies</p>
                </div>
                <div class="market-card" data-market="set50">
                    <h3>üáπüá≠ SET-50</h3>
                    <p>Thailand's 50 largest companies</p>
                </div>
                <div class="market-card" data-market="set100">
                    <h3>üáπüá≠ SET-100</h3>
                    <p>Thailand's 100 largest companies</p>
                </div>
                <div class="market-card" data-market="sp500">
                    <h3>üìä S&P 500</h3>
                    <p>500 largest US companies</p>
                </div>
            </div>
            <div style="text-align: center;">
                <button class="btn btn-primary" id="next-to-step2" disabled>Next: Choose Stocks</button>
            </div>
        </div>

        <!-- Step 2: Stock Selection -->
        <div class="step-container" id="step2-container">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">Select Stocks from <span id="selected-market-name"></span></h2>

            <div class="performance-notice">
                <strong>‚ö° Performance Notice:</strong>
                <p>‚Ä¢ More stocks selected = longer processing time</p>
                <p>‚Ä¢ Recommended: 10-30 stocks for optimal performance</p>
                <p>‚Ä¢ Maximum: 50 stocks to avoid timeouts</p>
            </div>

            <div class="selection-summary">
                <div class="summary-text">Selected: <span id="selected-count">0</span> stocks</div>
                <div style="margin-top: 10px;">
                    <button class="btn btn-secondary" id="select-all-btn" style="font-size: 14px; padding: 8px 16px;">Select All Stocks</button>
                    <button class="btn btn-secondary" id="deselect-all-btn" style="font-size: 14px; padding: 8px 16px; margin-left: 10px;">Deselect All</button>
                </div>
                <div style="font-size: 14px; color: #7f8c8d;">
                    Click industry headers to expand/collapse. Check individual stocks or entire industries.
                </div>
                </div>
            </div>

            <div id="stock-selection-content">
                <div class="loading">Loading stock data...</div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" id="back-to-step1">Back</button>
                <button class="btn btn-primary" id="next-to-step3" disabled>Next: Elbow Plot</button>
            </div>
        </div>

        <!-- Step 3: Elbow Plot -->
        <div class="step-container" id="step3-container">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Determine Optimal Number of Clusters</h2>

            <div style="max-width: 800px; margin: 0 auto;">
                <div class="selection-summary" style="margin-bottom: 30px;">
                    <div class="summary-text">Analyzing <span id="elbow-selected-count">0</span> stocks from <span id="elbow-market-name"></span></div>
                </div>

                <div class="chart-container">
                    <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">Elbow Plot - Inertia vs Number of Clusters</h3>
                    <canvas id="elbowChart"></canvas>
                </div>

                <div style="background: #ecf0f1; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #2c3e50; margin-bottom: 10px;">How to interpret the Elbow Plot:</h4>
                    <ul style="color: #34495e; line-height: 1.6;">
                        <li><strong>Look for the "elbow" point</strong> where the inertia starts to decrease more slowly</li>
                        <li><strong>Choose K where adding more clusters doesn't significantly reduce inertia</strong></li>
                        <li><strong>Common K values:</strong> 2-5 clusters are typically optimal for stock analysis</li>
                        <li><strong>Balance:</strong> Too few clusters = oversimplification, too many = overfitting</li>
                    </ul>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-secondary" id="back-to-step2">Back</button>
                    <button class="btn btn-primary" id="next-to-step4">Next: Configure Analysis</button>
                </div>
            </div>
        </div>

        <!-- Step 4: Configuration & Start -->
        <div class="step-container" id="step4-container">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Configure Clustering Analysis</h2>

            <div style="max-width: 600px; margin: 0 auto;">
                <div class="selection-summary" style="margin-bottom: 30px;">
                    <div class="summary-text">Ready to analyze <span id="final-selected-count">0</span> stocks from <span id="final-market-name"></span></div>
                </div>

                <form id="clustering-form">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #2c3e50;">
                            Number of Clusters (K):
                        </label>
                        <select name="k" required style="width: 100%; padding: 12px; border: 2px solid #bdc3c7; border-radius: 6px; font-size: 16px;">
                            <option value="">Select number of clusters</option>
                            <option value="2">2 Clusters</option>
                            <option value="3">3 Clusters</option>
                            <option value="4">4 Clusters</option>
                            <option value="5">5 Clusters</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #2c3e50;">
                            Clustering Method:
                        </label>
                        <select name="method" required style="width: 100%; padding: 12px; border: 2px solid #bdc3c7; border-radius: 6px; font-size: 16px;">
                            <option value="dtw_kmeans">DTW + KMeans (Recommended)</option>
                            <option value="euclidean_kmeans" disabled>Euclidean + KMeans (Coming Soon)</option>
                        </select>
                    </div>

                    <div style="text-align: center;">
                        <button type="button" class="btn btn-secondary" id="back-to-step3">Back</button>
                        <button type="submit" class="btn btn-primary" id="start-clustering-btn">
                            üöÄ Start Clustering Analysis
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Processing Modal -->
        <div id="processing-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; padding: 40px; border-radius: 15px; text-align: center; max-width: 400px;">
                <div style="font-size: 48px; margin-bottom: 20px;">‚è≥</div>
                <h3 style="color: #2c3e50; margin-bottom: 15px;">Processing Clustering Analysis</h3>
                <p style="color: #7f8c8d; margin-bottom: 20px;">This may take a few minutes depending on the number of stocks selected...</p>
                <div style="width: 100%; height: 8px; background: #ecf0f1; border-radius: 4px; overflow: hidden;">
                    <div style="width: 100%; height: 100%; background: linear-gradient(90deg, #3498db, #2980b9); animation: loading 2s infinite;"></div>
                </div>
            </div>
        </div>

        <style>
            @keyframes loading {
                0% { transform: translateX(-100%); }
                100% { transform: translateX(100%); }
            }
        </style>
    </div>

    <div class="back-link">
        <a href="/">‚Üê Back to Home</a>
    </div>

    <div class="footer">
        Power by PK
    </div>

    <script>
        let selectedMarket = '';
        let selectedStocks = new Set();
        let marketData = {};

        // Step 1: Market Selection
        document.querySelectorAll('.market-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.market-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedMarket = this.dataset.market;

                const marketNames = {
                    'nasdaq100': 'NASDAQ-100',
                    'set50': 'SET-50',
                    'set100': 'SET-100',
                    'sp500': 'S&P 500'
                };
                document.getElementById('selected-market-name').textContent = marketNames[selectedMarket] || selectedMarket.toUpperCase();

                document.getElementById('next-to-step2').disabled = false;
            });
        });

        document.getElementById('next-to-step2').addEventListener('click', function() {
            if (selectedMarket) {
                goToStep(2);
                loadStockData();
            }
        });

        document.getElementById('next-to-step2').addEventListener('click', function() {
            if (selectedMarket) {
                goToStep(2);
                loadStockData();
            }
        });

        // Step 2: Stock Selection
        async function loadStockData() {
            const content = document.getElementById('stock-selection-content');
            content.innerHTML = '<div class="loading">Loading stock data...</div>';

            try {
                const response = await fetch(`/api/stocks/${selectedMarket}`);
                const data = await response.json();

                if (data.error) {
                    content.innerHTML = `<div class="error">Error: ${data.error}</div>`;
                    return;
                }

                marketData = data.stocks_by_industry;
                renderStockSelection();

            } catch (error) {
                content.innerHTML = `<div class="error">Error loading stock data: ${error.message}</div>`;
            }
        }

        function renderStockSelection() {
            const content = document.getElementById('stock-selection-content');
            let html = '';

            for (const [industry, stocks] of Object.entries(marketData)) {
                html += `
                    <div class="industry-section">
                        <div class="industry-header" onclick="toggleIndustry('${industry}')">
                            <div class="industry-toggle" id="industry-toggle-${industry}"></div>
                            <div class="industry-name">${industry}</div>
                            <div class="industry-count">${stocks.length} stocks</div>
                        </div>
                        <div class="stock-list" id="stock-list-${industry}">
                            ${stocks.map(stock => `
                                <div class="stock-item">
                                    <div class="stock-checkbox" onclick="toggleStock('${stock.symbol}', '${industry}')"></div>
                                    <div class="stock-name">${stock.symbol} - ${stock.name || 'N/A'}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            content.innerHTML = html;
        }

        function toggleIndustry(industry) {
            const stockList = document.getElementById(`stock-list-${industry}`);
            const toggle = document.getElementById(`industry-toggle-${industry}`);

            if (stockList.classList.contains('expanded')) {
                stockList.classList.remove('expanded');
                toggle.classList.remove('checked');
            } else {
                stockList.classList.add('expanded');
                toggle.classList.add('checked');
                // Auto-select all stocks in this industry
                selectAllStocksInIndustry(industry);
            }
        }

        function toggleStock(symbol, industry) {
            const checkbox = event.target;

            if (selectedStocks.has(symbol)) {
                selectedStocks.delete(symbol);
                checkbox.classList.remove('checked');
            } else {
                selectedStocks.add(symbol);
                checkbox.classList.add('checked');
            }

            updateSelectionCount();
            updateIndustryToggle(industry);
        }

        function selectAllStocksInIndustry(industry) {
            const stocks = marketData[industry] || [];
            stocks.forEach(stock => {
                selectedStocks.add(stock.symbol);
                const checkbox = document.querySelector(`[onclick="toggleStock('${stock.symbol}', '${industry}')"]`);
                if (checkbox) checkbox.classList.add('checked');
            });
            updateSelectionCount();
            updateIndustryToggle(industry);
        }

        function updateIndustryToggle(industry) {
            const stocks = marketData[industry] || [];
            const selectedInIndustry = stocks.filter(stock => selectedStocks.has(stock.symbol)).length;
            const toggle = document.getElementById(`industry-toggle-${industry}`);

            if (selectedInIndustry === stocks.length) {
                toggle.classList.add('checked');
            } else {
                toggle.classList.remove('checked');
            }
        }

        function updateSelectionCount() {
            document.getElementById('selected-count').textContent = selectedStocks.size;
            document.getElementById('next-to-step3').disabled = selectedStocks.size === 0;
        }

        // Select All functionality
        document.getElementById('select-all-btn').addEventListener('click', function() {
            selectedStocks.clear();
            const allStocks = [];

            // Collect all stocks from all industries
            for (const [industry, stocks] of Object.entries(marketData)) {
                stocks.forEach(stock => {
                    selectedStocks.add(stock.symbol);
                    allStocks.push(stock.symbol);
                });
            }

            // Update checkboxes
            document.querySelectorAll('.stock-checkbox').forEach(checkbox => {
                checkbox.classList.add('checked');
            });

            // Update industry toggles
            document.querySelectorAll('.industry-toggle').forEach(toggle => {
                toggle.classList.add('checked');
            });

            updateSelectionCount();
        });

        // Deselect All functionality
        document.getElementById('deselect-all-btn').addEventListener('click', function() {
            selectedStocks.clear();

            // Update checkboxes
            document.querySelectorAll('.stock-checkbox').forEach(checkbox => {
                checkbox.classList.remove('checked');
            });

            // Update industry toggles
            document.querySelectorAll('.industry-toggle').forEach(toggle => {
                toggle.classList.remove('checked');
            });

            updateSelectionCount();
        });

        document.getElementById('next-to-step3').addEventListener('click', function() {
            if (selectedStocks.size > 0) {
                // Show processing indicator
                const btn = this;
                btn.disabled = true;
                btn.innerHTML = '‚è≥ Processing...';
                
                // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ select method ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                const stocks = Array.from(selectedStocks).join(',');
                window.location.href = `/cluster/select-method/${selectedMarket}?stocks=${encodeURIComponent(stocks)}`;
            }
        });

        function updateElbowSummary() {
            document.getElementById('elbow-selected-count').textContent = selectedStocks.size;
            const marketNames = {
                'nasdaq100': 'NASDAQ-100',
                'set50': 'SET-50',
                'set100': 'SET-100',
                'sp500': 'S&P 500'
            };
            document.getElementById('elbow-market-name').textContent = marketNames[selectedMarket] || selectedMarket.toUpperCase();
        }

        async function loadElbowPlot() {
            try {
                const response = await fetch(`/api/cluster/elbow/${selectedMarket}`);
                const data = await response.json();

                if (data.error) {
                    document.getElementById('elbowChart').parentElement.innerHTML = `<div class="error">Error loading elbow plot: ${data.error}</div>`;
                    return;
                }

                // Create elbow chart
                const ctx = document.getElementById('elbowChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.k_values,
                        datasets: [{
                            label: 'Inertia',
                            data: data.inertia_values,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#3498db',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: true },
                            title: {
                                display: true,
                                text: 'Elbow Plot: Inertia vs Number of Clusters (K)'
                            }
                        },
                        scales: {
                            x: {
                                title: { display: true, text: 'Number of Clusters (K)' }
                            },
                            y: {
                                title: { display: true, text: 'Inertia' },
                                beginAtZero: false
                            }
                        }
                    }
                });

            } catch (error) {
                document.getElementById('elbowChart').parentElement.innerHTML = `<div class="error">Error loading elbow plot: ${error.message}</div>`;
            }
        }

        document.getElementById('next-to-step4').addEventListener('click', function() {
            goToStep(4);
            updateFinalSummary();
        });

        function updateFinalSummary() {
            document.getElementById('final-selected-count').textContent = selectedStocks.size;
            const marketNames = {
                'nasdaq100': 'NASDAQ-100',
                'set50': 'SET-50',
                'set100': 'SET-100',
                'sp500': 'S&P 500'
            };
            document.getElementById('final-market-name').textContent = marketNames[selectedMarket] || selectedMarket.toUpperCase();
        }

        // Navigation
        document.getElementById('back-to-step1').addEventListener('click', () => goToStep(1));
        document.getElementById('back-to-step2').addEventListener('click', () => goToStep(2));
        document.getElementById('back-to-step3').addEventListener('click', () => goToStep(3));

        function goToStep(stepNumber) {
            document.querySelectorAll('.step-container').forEach(container => {
                container.classList.remove('active');
            });
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active', 'completed');
            });

            document.getElementById(`step${stepNumber}-container`).classList.add('active');

            for (let i = 1; i <= stepNumber; i++) {
                const step = document.getElementById(`step${i}`);
                if (i < stepNumber) {
                    step.classList.add('completed');
                } else {
                    step.classList.add('active');
                }
            }
        }

        // Form submission
        document.getElementById('clustering-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            formData.append('market', selectedMarket);
            formData.append('stocks', Array.from(selectedStocks).join(','));

            // Show processing modal
            document.getElementById('processing-modal').style.display = 'flex';

            // Submit form
            fetch('/cluster/custom', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Clustering failed');
                }
            })
            .then(html => {
                // Redirect to results page or replace content
                window.location.href = `/cluster/result/${selectedMarket}/custom/${formData.get('k')}`;
            })
            .catch(error => {
                document.getElementById('processing-modal').style.display = 'none';
                alert('Error: ' + error.message);
            });
        });
    </script>
</body>
</html></content>
<parameter name="filePath">c:\practice_projects\smartpredict_stock\templates\cluster.html